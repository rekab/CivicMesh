<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Civic Mesh</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="brand">
        <div class="brand__title">CivicMesh</div>
      </div>
      <div id="debugBanner" class="pill pill--warn pill--debug" hidden>DEBUG</div>
      <div class="status">
        <div id="sessionStatus" class="pill pill--ok">Connected</div>
      </div>
    </header>

    <main class="layout">
      <section class="panel panel--left">
        <button id="channelToggle" class="panel__header panel__header--menu" type="button" aria-expanded="true">
          <span class="menu-icon" aria-hidden="true">☰</span>MENU
        </button>
        <div id="welcomeBox" class="welcome">
          <div class="welcome__title">Welcome</div>
          <div class="welcome__body">Pick a channel below to join the conversation.</div>
        </div>
        <div class="menu-entry" id="helpToggle">❓ Help/About</div>
        <div id="channels" class="channels"></div>
      </section>

      <section class="panel panel--main" hidden>
        <div class="panel__header">
          <div class="panel__title" id="channelTitle">Loading…</div>
          <button id="refreshBtn" class="btn btn--ghost">Refresh</button>
        </div>

        <div id="messages" class="messages"></div>

        <div class="composer">
          <div class="composer__row">
            <input id="name" class="input" placeholder="Your name" maxlength="10" />
          </div>
          <div class="composer__row">
            <textarea id="content" class="textarea" placeholder="Write a message…" maxlength="100"></textarea>
          </div>
          <div class="composer__row composer__row--actions">
            <div class="composer__notes">
              <div id="channelHint" class="hint" hidden>Select a channel to post.</div>
              <div id="charCount" class="hint">0/… · … msgs left</div>
              <div id="postError" class="error"></div>
            </div>
            <button id="postBtn" class="btn btn--primary" disabled>Post to Mesh</button>
          </div>
        </div>
      </section>

      <section class="panel panel--docs" hidden>
        <div class="panel__header">
          <div class="panel__title">Help &amp; About</div>
          <button id="helpClose" class="btn btn--ghost">Close</button>
        </div>
        <div class="docs">
          <p>CivicMesh is a WiFi hotspot <i>not</i> connected to the Internet. This is a local hub relay for community messages.</p>
          <p>It connects to MeshCore, a volunteer-run mesh network. Small radios across the region relay messages between each other, with no cell towers, no ISPs, and no central owner.</p>
          <p>Select a channel to view or post updates. On-site channels stay at this hotspot. Mesh channels relay to the wider network.</p>
          <p>Messages are public. Be helpful. Be brief. Be kind.</p>
        </div>
      </section>
    </main>

    <script src="/app.js"></script>
  </body>
</html>
